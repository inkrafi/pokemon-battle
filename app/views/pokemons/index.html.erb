<form action="<%= pokemons_path %>" accept-charset="UTF-8" method="post" class="text-dark">
                <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
    <div class="mb-3">
        <label for="pokemon_name" class="form-label fw-bold fs-5">Player 1</label>
        <input type="text" class="form-control bg-input" id="pokemon_name" name="pokemon[name]" placeholder="Your name" required>
    </div>
    <div class="mb-3">
        <p class="mt-5 fw-bold fs-5">Choose Pokemon</p>
        <div class="d-flex flex-wrap d-flex justify-content-center">
            <% @pokedexes.each do |pokedex| %>
                <div class="card m-3 pokedex-card" style="width: 10rem;" data-type-id="<%= pokedex.type.id %>">
                    <div class="card-body">
                        <input class="form-check-input" type="radio" name="pokemon[pokedex_id]" id="<%= "pokedex_#{pokedex.id}" %>" value="<%= pokedex.id %>" required>
                        <label class="form-check-label" for="<%= "pokedex_#{pokedex.id}" %>">
                            <img src="<%= pokedex.image_url %>" alt="image" width="120">
                            <h5><%= pokedex.name %></h5>
                            <p>HP: <%= pokedex.hp %></p>
                            <p>Attack: <%= pokedex.attack %></p>
                            <p>Defense: <%= pokedex.defense %></p>
                            <p>Speed: <%= pokedex.speed %></p>
                            <p>Type: <%= pokedex.type.name %></p>
                        </label>
                    </div>
                </div>
            <% end %>
        </div>
    </div>
    <div class="mb-3">
        <h5>Choose Skills (max: 4)</h5>
        <% @skills.each do |skill| %>
            <div class="btn-group skill-checkbox d-none" role="group" aria-label="Skill checkbox group" data-type-id="<%= skill.type.id %>">
                <input type="checkbox" name="pokemon[skill_id]" class="btn-check" id="<%= "skill_#{skill.id}" %>" value="<%= skill.id %>" autocomplete="off">
                <label class="btn btn-outline-light" for="<%= "skill_#{skill.id}" %>">
                    <p><%= skill.name %></p>
                </label>
            </div>
        <% end %>
    </div>
    <button type="submit" class="btn btn-warning">SUBMIT</button>
</form>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const maxSkills = 4;
    const skillCheckboxes = document.querySelectorAll('.skill-checkbox input[type="checkbox"]');

    skillCheckboxes.forEach(checkbox => {
      checkbox.addEventListener('change', function () {
        const selectedSkills = Array.from(skillCheckboxes)
          .filter(checkbox => checkbox.checked)
          .map(checkbox => checkbox.value);

        if (selectedSkills.length > maxSkills) {
          this.checked = false; // Batasi jumlah pilihan skill
        }
      });
    });
  });
</script>
